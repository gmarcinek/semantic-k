<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Assistant</title>

    <!-- Bootstrap 5 CSS from CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <div class="container-fluid">
        <!-- Header -->
        <div class="header">\n            <h1>Chat Assistant</h1>\n            <p>General chat with optional Wikipedia sourcing when needed</p>\n        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Left column: Wikipedia Articles List -->
            <div class="articles-column">
                <div class="articles-header">
                    <h5>ðŸ“š ArtykuÅ‚y Wikipedii</h5>
                    <small class="text-muted">PrzeglÄ…dane w tej sesji</small>
                </div>
                <div class="articles-list" id="articlesList">
                    <div class="text-center text-muted p-3">
                        <p>Brak artykuÅ‚Ã³w</p>
                        <small>ArtykuÅ‚y Wikipedii pojawiÄ… siÄ™ tutaj po zadaniu pytania</small>
                    </div>
                </div>
            </div>
            <!-- Chat Column -->
            <div class="chat-column">
                <div class="chat-messages scrollbar-custom" id="chatMessages">
                    <div class="text-center text-muted">
                        <p>ðŸ‘‹ Witaj! Jestem asystentem Wikipedia Q&A.</p>
                        <p>Zadaj mi pytanie, a znajdÄ™ dla Ciebie informacje z Wikipedii.</p>
                    </div>
                </div>
                <!-- Chat input at bottom (right column) -->
                <div class="chat-input-container">
                    <form class="input-form" id="chatForm">
                        <textarea
                            class="form-control scrollbar-custom"
                            id="userPrompt"
                            placeholder="Wpisz pytanie... (Ctrl+Enter aby wyslac)"
                            rows="1"
                        ></textarea>
                        <div class="d-flex gap-2">
                            <button type="submit" class="btn btn-primary btn-sm" id="sendBtn">Wyslij</button>
                            <button type="button" class="btn btn-secondary btn-sm" id="resetBtn">Reset</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Input Column -->
            <div class="input-column">
                <form class="input-form" id="chatForm">
                    <div class="mb-3">
                        <label for="userPrompt" class="form-label">ðŸ’¬ Twoja wiadomoÅ›Ä‡:</label>
                        <textarea
                            class="form-control scrollbar-custom"
                            id="userPrompt"
                            placeholder="Wpisz pytanie, a znajdÄ™ informacje z Wikipedii..."
                            rows="10"
                        ></textarea>
                    </div>

                    <div class="button-group">
                        <button type="submit" class="btn btn-primary" id="sendBtn">
                            ðŸ“¤ WYÅšLIJ
                        </button>
                        <button type="button" class="btn btn-secondary" id="resetBtn">
                            ðŸ”„ RESET
                        </button>
                    </div>
                </form>
            </div>
    </div>

    <!-- Footer with Metadata -->
        <div class="footer">
            <div class="footer-content" id="metadataFooter">
                <div class="footer-item">
                    <span class="footer-label">Topic</span>
                    <span class="footer-value" id="metaTopic">-</span>
                </div>
                <div class="footer-item">
                    <span class="footer-label">ZgodnoÅ›Ä‡ z tematem</span>
                    <div class="footer-value">
                        <div class="progress">
                            <div class="progress-bar bg-info" id="metaRelevance" style="width: 0%"></div>
                        </div>
                        <span id="metaRelevanceText">0%</span>
                    </div>
                </div>
                <div class="footer-item">
                    <span class="footer-label">BezpieczeÅ„stwo</span>
                    <div class="footer-value">
                        <div class="progress">
                            <div class="progress-bar bg-warning" id="metaDanger" style="width: 0%"></div>
                        </div>
                        <span id="metaDangerText">0%</span>
                    </div>
                </div>
                <div class="footer-item">
                    <span class="footer-label">Kontynuacja</span>
                    <div class="footer-value">
                        <div class="progress">
                            <div class="progress-bar bg-success" id="metaContinuation" style="width: 0%"></div>
                        </div>
                        <span id="metaContinuationText">0%</span>
                    </div>
                </div>
                <div class="footer-item">
                    <span class="footer-label">Zmiana tematu</span>
                    <div class="footer-value">
                        <div class="progress">
                            <div class="progress-bar bg-primary" id="metaTopicChange" style="width: 0%"></div>
                        </div>
                        <span id="metaTopicChangeText">0%</span>
                    </div>
                </div>
            </div>
            <div class="mt-2 text-center" style="opacity: 0.8;">
                <small id="metaSummary">Oczekiwanie na pierwszÄ… wiadomoÅ›Ä‡...</small>
            </div>
        </div>
    </div>


    <!-- Image Modal -->
    <div class="modal fade" id="imageModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="imageModalLabel">PodglÄ…d obrazu</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <img id="imageModalImg" class="img-fluid" alt=""/>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>

